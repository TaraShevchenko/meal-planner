# Техническое задание: Приложение для планирования питания

## 1. Общее описание проекта

### 1.1 Цель проекта

Создание приложения для удобного контроля питания и помощи в учете необходимых продуктов с возможностью планирования приемов пищи, отслеживания пищевой ценности и автоматического составления списков покупок.

### 1.2 Основные пользователи

- Индивидуальные пользователи, контролирующие свое питание
- Семьи, планирующие питание для нескольких человек
- Люди, следящие за БЖУ и калорийностью рациона

## 2. Функциональные требования

### 2.1 Планировщик-дневник питания

#### 2.1.1 Основной функционал

- **Планирование приемов пищи**: Возможность заранее планировать что будет съедено
- **Отметка о выполнении**: Отмечать фактически съеденные приемы пищи
- **Отображение пищевой ценности**: Показ БЖУ и калорий для каждого приема пищи
- **Контроль лимитов**: Предотвращение превышения запланированных БЖУ и калорий
- **Перспектива развития**: Учет микронутриентов и витаминов

#### 2.1.2 Типы приемов пищи

- Завтрак
- Обед
- Ужин
- Перекус

### 2.2 Система абстракций питания

#### 2.2.1 Ингредиенты

- Базовые продукты с пищевой ценностью на 100г
- Поддержка различных единиц измерения

#### 2.2.2 Блюда (на основе рецептов)

- **Стабильная сущность**: Переиспользуемые рецепты
- **Состав**: Список ингредиентов с количествами
- **Выход**: Количество порций или общий вес готового блюда
- **Гибкость**: Возможность изменения количества ингредиентов при сохранении пропорций

#### 2.2.3 Быстрые блюда

- **Назначение**: Блюда из ресторанов/кафе с неизвестным точным составом
- **Данные**: Приблизительные БЖУ и калории
- **Перспектива развития**: Распознавание блюд по фото через нейросети

### 2.3 Система измерений и порций

#### 2.3.1 Единицы измерения

- **Основная единица**: Граммы
- **Дополнительные единицы**: Порции, штуки, мл, л
- **Отображение**: Граммы всегда доступны (в скобках или по наведению)

#### 2.3.2 История порций

- **Персонализация**: Индивидуальная история для каждого пользователя
- **Популярные варианты**: Отображение 3 самых используемых количеств
- **Расширенный список**: Доступ ко всей истории по кнопке
- **Автосохранение**: Новые количества автоматически сохраняются в историю

### 2.4 Семейный режим

#### 2.4.1 Управление семьей

- **Создание семьи**: Возможность создать семейную группу
- **Добавление участников**: Приглашение других пользователей в семью

#### 2.4.2 Групповое планирование

- **Общий обзор**: Просмотр планов питания всех членов семьи
- **Группировка данных**: Агрегация информации о том, кто что будет есть
- **Общий список покупок**: Суммирование потребностей всей семьи

### 2.5 Система покупок

#### 2.5.1 Генерация списка покупок

- **Выбор периода**: Возможность выбрать диапазон дат для планирования
- **Выбор пользователей**: Индивидуальный или семейный список
- **Суммирование ингредиентов**: Автоматический подсчет необходимых продуктов

#### 2.5.2 Категоризация продуктов

**Основной список покупок:**

- Продукты, которые точно нужно купить
- Критерий: Требуемое количество превышает минимальную доступную фасовку

**Список "Обратить внимание":**

- Продукты, которые нужно проверить в наличии
- Критерий: Требуемое количество меньше минимальной фасовки
- Примеры: 30г соли, 100г оливкового масла

#### 2.5.3 Система фасовок

- **Магазинные упаковки**: Перечень доступных размеров упаковок для каждого продукта
- **Привязка к магазинам**: Возможность указать конкретные магазины
- **Минимальные фасовки**: Определение наименьшей доступной упаковки

### 2.6 Детальный режим дня

#### 2.6.1 Информация для приготовления

- **Список блюд**: Все блюда, которые нужно приготовить в выбранный день
- **Количества ингредиентов**: Точные граммовки для каждого ингредиента
- **Порционность**: Расчет количества порций на выходе
- **Распределение**: Помощь в правильном разделении на порции

## 3. Техническая архитектура

### 3.1 Модель данных

Основана на схеме `mvp-schema.prisma`, включающей:

#### 3.1.1 Пользователи и семьи

- `User`: Основная информация о пользователе
- `Family`: Семейные группы
- `FamilyMember`: Связь пользователей с семьями

#### 3.1.2 Продукты и рецепты

- `Ingredient`: Базовые ингредиенты
- `Meal`: Блюда с рецептами
- `MealIngredient`: Состав блюд с количествами ингредиентов
- `QuickMeal`: Быстрые блюда

#### 3.1.3 Планирование питания

- `MealEntry`: Записи о приемах пищи
- `MealEntryIngredient`: Ингредиенты в приемах пищи
- `MealEntryMeal`: Блюда в приемах пищи
- `MealEntryQuickMeal`: Быстрые блюда в приемах пищи

#### 3.1.4 История и покупки

- `PortionHistory`: История использованных порций
- `ShoppingList`: Списки покупок
- `ShoppingListItem`: Элементы списков покупок
- `IngredientPackaging`: Информация о фасовках

### 3.2 Единицы измерения

Поддерживаемые единицы (enum `MeasurementUnit`):

- `GRAM` - граммы
- `KILOGRAM` - килограммы
- `LITER` - литры
- `MILLILITER` - миллилитры
- `PIECE` - штуки
- `SERVING` - порции

## 4. Пользовательский интерфейс

### 4.1 Основные экраны

1. **Главная страница**: Обзор дневного плана питания
2. **Планировщик**: Календарь с возможностью планирования приемов пищи
3. **Библиотека рецептов**: Управление блюдами и рецептами
4. **Ингредиенты**: База продуктов с пищевой ценностью
5. **Список покупок**: Автоматически генерируемые списки
6. **Семья**: Управление семейным режимом
7. **Статистика**: Анализ питания и достижения целей

### 4.2 Принципы UX

- **Быстрый ввод**: Минимальное количество действий для добавления приема пищи
- **Умные подсказки**: Использование истории порций для быстрого выбора
- **Гибкость единиц**: Возможность ввода в удобных единицах с автоматическим пересчетом
- **Визуальная обратная связь**: Наглядное отображение прогресса по БЖУ и калориям

## 5. Этапы разработки

### 5.1 MVP (Минимально жизнеспособный продукт)

1. **Базовая функциональность**:

   - Регистрация и аутентификация пользователей
   - Управление ингредиентами
   - Создание простых блюд
   - Планирование приемов пищи
   - Отслеживание БЖУ и калорий

2. **Система измерений**:
   - Поддержка основных единиц измерения
   - Базовая история порций

### 5.2 Расширенная версия

1. **Семейный режим**:

   - Создание и управление семьями
   - Групповое планирование

2. **Система покупок**:

   - Генерация списков покупок
   - Управление фасовками
   - Категоризация продуктов

3. **Быстрые блюда**:
   - Добавление блюд с приблизительной пищевой ценностью

### 5.3 Продвинутые функции

1. **Аналитика и отчеты**:

   - Детальная статистика питания
   - Анализ трендов
   - Достижение целей

2. **Интеграции**:

   - Распознавание блюд по фото
   - Интеграция с фитнес-трекерами
   - API для внешних приложений

3. **Микронутриенты**:
   - Отслеживание витаминов и минералов
   - Рекомендации по питанию

## 6. Технические требования

### 6.1 Производительность

- Время отклика интерфейса: < 200мс
- Время загрузки страниц: < 2с
- Поддержка одновременной работы до 1000 пользователей

### 6.2 Безопасность

- Аутентификация через Clerk
- Шифрование персональных данных
- Регулярные бэкапы данных
- Соответствие GDPR

### 6.3 Совместимость

- Веб-приложение с адаптивным дизайном
- Поддержка современных браузеров
- Возможность работы на мобильных устройствах

## 7. Критерии успеха

### 7.1 Функциональные критерии

- Пользователь может спланировать питание на неделю за 15 минут
- Автоматическое составление списка покупок работает корректно в 95% случаев
- История порций сокращает время ввода данных на 60%

### 7.2 Пользовательские критерии

- Удобство использования: оценка 4.5+ из 5
- Время обучения новых пользователей: < 30 минут
- Ежедневное использование: 70%+ активных пользователей

Это техническое задание служит основой для разработки MVP приложения планирования питания с возможностью последующего расширения функциональности.
